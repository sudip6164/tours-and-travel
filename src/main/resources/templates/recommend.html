<!DOCTYPE html>
<html lang="zxx" class="no-js" xmlns:th="http://www.thymeleaf.org">
  <head>
    <!-- Mobile Specific Meta -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Favicon-->
    <link rel="shortcut icon" href="/img/fav.png" />
    <!-- Author Meta -->
    <meta name="author" content="colorlib" />
    <!-- Meta Description -->
    <meta name="description" content="" />
    <!-- Meta Keyword -->
    <meta name="keywords" content="" />
    <!-- meta character set -->
    <meta charset="UTF-8" />
    <!-- Site Title -->
    <title>Travel & Tour</title>
    <!-- Bootstrap Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.1/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700"
      rel="stylesheet"
    />
    <!--
			CSS
			============================================= -->
    <link rel="stylesheet" href="/css/linearicons.css" />
    <link rel="stylesheet" href="/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/css/bootstrap.css" />
    <link rel="stylesheet" href="/css/magnific-popup.css" />
    <link rel="stylesheet" href="/css/animate.min.css" />
    <link rel="stylesheet" href="/css/owl.carousel.css" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="css/contact.css">
  </head>
  <body>
    <!-- start banner Area -->
    <section class="banner-area" id="home">
      <!-- Start Header Area -->
      <header class="default-header">
        <nav class="navbar navbar-expand-lg navbar-light">
          <div class="container">
            <a class="navbar-brand" href="/">
              <img src="/img/logo.png" alt="Rahul's Tour & Travel" style="height: 50px;">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="text-white lnr lnr-menu"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end align-items-center mt-4" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li><a href="/">Home</a></li>
              <li><a href="/about">About</a></li>
              <li><a href="/recommend">Recommendation</a></li>
              <li><a href="/contact">Contact</a></li>
              <li><a href="/review">Review</a></li>
                <li>
                  <a href="/booknow">
                    <button class="btn btn-primary">
                      Book Now
                    </button>
                  </a>
                </li>
                <!-- Dropdown -->
                	<li class="dropdown" th:if="${user != null}">
						<a class="dropdown-toggle" href="/user" id="navbardrop" >
							<button class="btn btn-primary rounded" th:text="${user.username}"></button>
							</a>
							<div class="dropdown-menu">
							  <a class="dropdown-item" href="/logout">Logout</a>
							</div>
					</li>
              </ul>
            </div>
        </nav>
         <!-- Search Bar -->
	<!-- Search Bar -->
	<div class="search-bar-container sticky-top">
	  <div class="d-flex justify-content-center h-100 rounded">
	    <input type="text" id="search-input" class="search-input" placeholder="Search by tour title..." onkeyup="filterTours()" 
	           style="padding: 10px; border: 1px solid #ccc; border-radius: 5px; outline: none;">
	    <button type="button" class="search-icon">
	      <i class="fa fa-search"></i>
	    </button>
	  </div>
	</div>
	<!-- Search Bar End -->

      <!-- Search Bar End -->
      </header>
  <!-- End Header Area -->
    </section>

<section class="default-banner">
        <div class="overlay"></div>
        <img src="img/slider1.jpg" alt="Banner Image">
    </section>

    <!-- Start about Area -->
    <section class="section-gap info-area" id="about">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="menu-content pb-40 col-lg-8">
            <div class="title text-center">
              <h1 class="mb-10">Top Recommendations</h1>
              <p>You can customized package as your choice as well. Kindly contact us for customized package        </p>
            </div>
          </div>
        </div>
		  <!-- Price Slider -->
<div class="text-center mt-4">
  <h5>Select Price Range (NPR)</h5>
  <div class="d-flex align-items-center justify-content-center">
    <span id="minPrice">1000</span>
    <input type="range" id="priceSlider" min="1000" max="100000" step="500" value="100000"
           oninput="filterToursByPrice()" style="width: 60%;">
    <span id="maxPrice">100000</span>
  </div>
  <p class="mt-2">Selected Price: NPR <span id="selectedPrice">100000</span></p>
</div>
   
        <div class="single-info row mt-40">
           <!-- Card 1 -->
           <div class="col-lg-3 col-md-6 equal-padding info-right" th:each="tour:${tourList}">
            <div class="card tour-card">
              <img th:if="${tour.tourImageUrl != null and !tour.tourImageUrl.isEmpty()}" 
                   th:src="${tour.tourImageUrl}" 
                   class="card-img-top" 
                   alt="Tour Image" 
                   height="190 px" 
                   style="object-fit: scale-down;">
              <div th:if="${tour.tourImageUrl == null or tour.tourImageUrl.isEmpty()}" 
                   class="card-img-top" 
                   style="height: 190px; display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; color: #999; font-style: italic; border: 1px solid #ddd;">
                No image
              </div>
              <div class="card-body">
                <i class="bi bi-geo-alt"></i>           
                <span class="card-title tour-title" th:text="${tour.title}"></span>
                <p class="card-text">Explore [[${tour.title}]]</p>
                <p class="review">
                  <span>
                  <i class="bi bi-star-fill me-1" style="color:#f97426"></i>
                  </span>
                  <span th:text="${tour.review}"></span>
               
                  <span>
                    <p>
                      NPR [[${tour.price}]]
                  <i class="bi bi-clock ml-2">
                      [[${tour.duration}]]
                    </i>
                  </p>
                  </span>  
                <a th:href="@{'/learnmore'(id=${tour.id})}" class="btn btn-primary">Learn More</a>               
               
              </div>
            </div>
          </div>
         
        </div>
      </div>
    </section>
    <!-- End about Area -->
    <!-- Start logo Area -->
    <section class="logo-area">
      <div class="container">
        <div class="row"></div>
      </div>
    </section>
    <!-- End logo Area -->
     
  <!-- start footer Area -->
  <footer class="footer-area section-gap">
    <div class="container">
      <div class="row">
        <div class="col-lg-5 col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>About Us</h6>
            <div class="list-group list-group-flush">
              <div class="list-group-item text-white">
                <p>At Rahul's Tour and Travel, we believe in creating unforgettable travel experiences that enrich your
                  life. </p>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5 col-md-6 col-sm-6">
          <div class="single-footer-widget">
            <h6>Quick Link</h6>
            <div class="footer-social d-flex align-items-left">
              <div class="list-group list-group-flush">
                <div class="list-group-item">
                  <ul>
                    <li class="list-footer text-white">
                      <a aria-current="page" class="active text-white" href="/">Recommendation</a>
                    </li>
                    <li class="list-footer">
                      <a aria-current="page" class="active text-white" href="/">FAQ</a>
                    </li>
                    <li class="list-footer">
                      <a aria-current="page" class="active text-white" href="/">Contact</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-2 col-md-6 col-sm-6 social-widget">
          <div class="single-footer-widget">
            <h6>Follow Us</h6>
            <p>Let us be social</p>
            <div class="footer-social d-flex align-items-center">
              <a href="#"><i class="fa fa-facebook"></i></a>
              <a href="#"><i class="fa fa-twitter"></i></a>
              <a href="#"><i class="fa fa-instagram"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- End footer Area -->

    <script src="js/vendor/jquery-2.2.4.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
      integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
      crossorigin="anonymous"
    ></script>
    <script src="js/vendor/bootstrap.min.js"></script>
    <script src="js/jquery.ajaxchimp.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/slick.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/waypoints.min.js"></script>
    <script src="js/main.js"></script>
<!-- JavaScript for Filtering -->
<script>
  function filterTours() {
    let input = document.getElementById("search-input").value.toLowerCase();
    let tourCards = document.querySelectorAll(".tour-card");
    let firstMatch = null; // Store the first matching tour

    tourCards.forEach((card) => {
      let title = card.querySelector(".tour-title").innerText.toLowerCase();
      let cardContainer = card.parentElement; // The column wrapper (div.col-lg-3)

      if (title.includes(input)) {
        cardContainer.style.display = "block";
        if (!firstMatch) {
          firstMatch = cardContainer; // Store the first match
        }
      } else {
        cardContainer.style.display = "none";
      }
    });

    // Scroll to the first matching tour if it exists
    if (firstMatch) {
      firstMatch.scrollIntoView({ behavior: "smooth", block: "start" });
    }
  }
</script>
<script>
function filterToursByPrice() {
    const selectedPrice = document.getElementById("priceSlider").value;
    document.getElementById("selectedPrice").textContent = selectedPrice;
    
    const tourCards = document.querySelectorAll(".tour-card");
    console.log("Number of tour cards found:", tourCards.length);
    
    tourCards.forEach((card, index) => {
        // The price is in a p tag that comes after the review p tag
        const priceElement = card.querySelector(".card-body > p:not(.review):not(.card-text)");
        if (priceElement) {
            const priceText = priceElement.textContent.trim();
            console.log(`Card ${index} price text:`, priceText);
            
            // Extract just the number from the price text
            const price = parseFloat(priceText.replace(/[^0-9.]/g, ''));
            console.log(`Card ${index} parsed price:`, price);
            
            // Show/hide based on price
            const cardContainer = card.parentElement;
            if (price <= parseFloat(selectedPrice)) {
                console.log(`Card ${index} showing (${price} <= ${selectedPrice})`);
                cardContainer.style.display = "block";
            } else {
                console.log(`Card ${index} hiding (${price} > ${selectedPrice})`);
                cardContainer.style.display = "none";
            }
        } else {
            console.log(`Card ${index} price element not found`);
        }
    });
}

// Initialize the slider when the page loads
document.addEventListener('DOMContentLoaded', function() {
    const priceSlider = document.getElementById("priceSlider");
    if (priceSlider) {
        console.log("Slider initialized");
        // Set initial price display
        document.getElementById("selectedPrice").textContent = priceSlider.value;
    } else {
        console.error("Price slider not found!");
    }
});
</script>
  </body>
</html>
